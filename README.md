# Ontology Template Generator & Visualizer

Live demo of an event-centric knowledge graph with automatic SHACL inference and D3.js visualization.

**Live Demo:** https://falcontologist.github.io/shacl-demo  
**API:** https://shacl-api-docker.onrender.com/api/stats

---

## What It Does

Enter a verb, select a word sense and situation type, fill in semantic roles, and the app generates a Turtle RDF instance. Hit **Run Inference** to generate opaque IRIs via SHACL SPARQL rules, or **Run Validation** to check conformance against the shapes. The force-directed graph updates live as you build.

---

## Architecture

### Frontend
Vanilla JavaScript + D3.js force-directed graph. Communicates with the backend API to load shapes, look up lemmas, run inference, and validate data. Hosted on GitHub Pages.

### Backend
Java + [Javalin](https://javalin.io/) REST API deployed on Render. Loads the ontology at startup via a federated manifest, runs TopBraid SHACL inference and validation on request.

### Ontology
Split into three federated partitions loaded via `manifest.ttl`:

| Partition | Contents | Loading |
|---|---|---|
| `conceptual.ttl` | Classes, properties | Live from GitHub on each deploy |
| `structural.ttl` | SHACL shapes, SPARQL rules | Live from GitHub on each deploy |
| `lexical.ttl` | VerbNet classes, lemmas, synsets | Cached in Docker image |

`conceptual.ttl` and `structural.ttl` are fetched live so changes are reflected immediately on redeploy. `lexical.ttl` (~57k triples) is baked into the Docker image at build time for startup performance.

---

## API Endpoints

| Method | Endpoint | Description |
|---|---|---|
| GET | `/api/stats` | Ontology counts: shapes, roles, rules, lemmas, synsets |
| GET | `/api/forms` | Shape definitions and field schemas |
| GET | `/api/lookup?verb=run` | Lemma lookup with senses and situations |
| POST | `/api/infer` | Run SHACL SPARQL inference on Turtle input |
| POST | `/api/validate` | Run SHACL validation on Turtle input |

`/api/infer` and `/api/validate` accept `Content-Type: text/plain` with a Turtle RDF body.

---

## Ontology Sources

- **VerbNet** — verb classes, thematic roles, selectional restrictions
- **WordNet** — synsets, glosses, sense disambiguation
- **FrameNet** — frame semantics, frame elements
- **Croftian Construction Grammar** — event-centric situation types

---

## Tech Stack

- **Frontend:** Vanilla JS, D3.js v7
- **Backend:** Java 17, Javalin 6, TopBraid SHACL API, Apache Jena
- **Deployment:** GitHub Pages (frontend), Render (backend), Docker
- **Semantic stack:** Turtle RDF, SHACL, SPARQL

---

## Local Development

### Backend
```bash
mvn package -DskipTests
java -jar target/shacl-service-1.0-SNAPSHOT-jar-with-dependencies.jar
```
The server starts on port 8080 and loads the ontology from the manifest at startup.

### Frontend
Serve the static files from any local HTTP server:
```bash
npx serve .
```
Update `CONFIG.API_BASE_URL` in `js/app.js` to point to `http://localhost:8080/api` for local testing.

---

## Repo Structure

```
/
├── manifest.ttl         # Federated ontology entry point
├── conceptual.ttl       # Classes and properties
├── structural.ttl       # SHACL shapes and inference rules
├── lexical.ttl          # Lemmas, synsets, VerbNet classes
├── src/main/java/       # Java backend
├── Dockerfile
├── js/app.js            # Frontend logic
├── css/style.css
└── index.html
```

Readme generated by Claude with light edits for accuracy. Last updated 20260218.
